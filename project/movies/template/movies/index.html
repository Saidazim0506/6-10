{% extends "movies/base.html" %}

{% block title %}
    {% if genre %}
        {{ genre.name }} janridagi filmlar
    {% else %}
        Barcha filmlar
    {% endif %}
{% endblock %}

{% block content %}

    {% if genre %}
        <h2>{{ genre.name }} janridagi filmlar</h2>
        <ul>
            {% for movie in movies %}
                <li>
                    <a href="{% url 'movie_detail' movie.id %}">
                        {{ movie.name }}
                    </a>
                </li>
            {% empty %}
                <li>Bu janrda film yo‘q.</li>
            {% endfor %}
        </ul>

        <p><a href="{% url 'index' %}">⬅ Barcha filmlar ro‘yxatiga qaytish</a></p>

    {% else %}
        <h2>Barcha janrlar</h2>
        <ul>
            {% for g in genres %}
                <li><a href="{% url 'genre_movies' g.id %}">{{ g.name }}</a></li>
            {% endfor %}
        </ul>

        <h2>Barcha filmlar</h2>
        <ul>
            {% for movie in movies %}
                <li>
                    <a href="{% url 'movie_detail' movie.id %}">{{ movie.name }}</a>
                    ({{ movie.genre.name }})
                </li>
            {% empty %}
                <li>Hozircha film qo‘shilmagan.</li>
            {% endfor %}
        </ul>
    {% endif %}

{% endblock %}
